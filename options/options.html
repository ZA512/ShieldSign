<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="settingsTitle">Paramètres - ShieldSign</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <img src="../icons/icon512ssf.png" alt="ShieldSign" class="header-logo">
        <h1 data-i18n="headerTitle">ShieldSign - Paramètres</h1>
      </div>
    </header>
    
    <nav class="tabs">
      <button class="tab-btn active" data-tab="community" data-i18n="tabCommunity">Sources communautaires</button>
      <button class="tab-btn" data-tab="enterprise" id="enterpriseTab" style="display: none;" data-i18n="tabEnterprise">Source entreprise</button>
      <button class="tab-btn" data-tab="personal" data-i18n="tabPersonal">Sources personnelles</button>
      <button class="tab-btn" data-tab="settings" data-i18n="tabSettings">Paramètres</button>
      <button class="tab-btn" data-tab="about" data-i18n="tabAbout">À propos</button>
    </nav>
    
    <main>
      <!-- Onglet Sources communautaires -->
      <div class="tab-content active" id="community">
        <section class="section">
          <h2 data-i18n="officialListTitle">Liste officielle ShieldSign</h2>
          <p class="section-description" data-i18n="officialListDescription">Liste officielle maintenue par l'équipe ShieldSign, incluant les services web et cloud les plus populaires. Activée par défaut.</p>
          
          <div class="official-list-container">
            <div class="list-item" id="officialListItem">
              <div class="list-info">
                <div class="list-name">ShieldSign Official List</div>
                <div class="list-url" data-i18n="officialListSubtitle">Liste officielle (65+ domaines validés)</div>
              </div>
              <div style="display: flex; gap: 8px;">
                <button class="toggle-btn enabled" id="officialListToggle" data-i18n-title="toggleDisable" title="Désactiver">
                  <i class="fas fa-check-circle"></i>
                </button>
                <button class="btn-icon" id="reinstallOfficialBtn" data-i18n-title="reinstallOfficial" title="Réinstaller la liste officielle">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <section class="section">
          <h2 data-i18n="communityListTitle">Listes communautaires additionnelles</h2>
          <p class="section-description" data-i18n="communityListDescription">Ajoutez d'autres listes publiques maintenues par la communauté (optionnel)</p>
          
          <div class="input-group">
            <input type="url" id="communityUrl" data-i18n-placeholder="communityUrlPlaceholder" placeholder="https://exemple.com/liste-communautaire.json" class="input-field">
            <button id="addCommunityBtn" class="btn btn-primary" data-i18n="btnAdd">Ajouter</button>
          </div>
          
          <div class="community-lists" id="communityLists">
            <p class="no-list" data-i18n="noListCommunity">Aucune liste additionnelle configurée</p>
          </div>
        </section>
      </div>
      
      <!-- Onglet Source entreprise -->
      <div class="tab-content" id="enterprise">
        <section class="section">
          <div class="info-box">
            <h3>ℹ️ À propos de la source entreprise</h3>
            <p>Cette fonctionnalité est destinée aux <strong>administrateurs d'entreprise</strong> qui souhaitent déployer une liste de domaines validés pour leurs collaborateurs.</p>
            <p><strong>Format des domaines :</strong> Utilisez le format complet incluant le sous-domaine et le domaine principal (ce qui se trouve entre <code>https://</code> et le premier <code>/</code>).</p>
            <p><strong>Exemples :</strong></p>
            <ul>
              <li>✅ <code>login.monentreprise.com</code></li>
              <li>✅ <code>sso.monentreprise.fr</code></li>
              <li>✅ <code>auth.intranet.monentreprise.net</code></li>
              <li>❌ <code>https://login.monentreprise.com/auth</code> (ne pas inclure https:// ni le chemin)</li>
            </ul>
            <p class="warning">⚠️ <strong>Sécurité :</strong> Hébergez votre liste sur un serveur interne ou privé, <strong>pas sur une URL publique</strong>.</p>
          </div>
        </section>
        
        <section class="section">
          <h2 data-i18n="enterpriseListTitle">Liste entreprise</h2>
          <p class="section-description" data-i18n="enterpriseListDescription">Une seule liste entreprise peut être configurée (priorité maximale sur toutes les autres sources)</p>
          
          <div class="input-group">
            <input type="url" id="enterpriseUrl" data-i18n-placeholder="enterpriseUrlPlaceholder" placeholder="https://intranet.monentreprise.com/shieldsign-list.json" class="input-field">
            <button id="addEnterpriseBtn" class="btn btn-primary" data-i18n="btnAdd">Ajouter</button>
          </div>
          
          <div class="enterprise-list" id="enterpriseList">
            <p class="no-list" data-i18n="noListEnterprise">Aucune liste entreprise configurée</p>
          </div>
        </section>
      </div>
      
      <!-- Onglet Sources personnelles -->
      <div class="tab-content" id="personal">
        <section class="section">
          <h2 data-i18n="personalDomainsTitle">Gestion des domaines personnels</h2>
          <p class="section-description" data-i18n="personalDomainsDescription">Ajoutez vos propres domaines de confiance (priorité supérieure aux listes communautaires)</p>
          
          <div class="input-group">
            <input type="text" id="personalDomain" data-i18n-placeholder="personalDomainPlaceholder" placeholder="login.exemple.com" class="input-field">
            <button id="addPersonalDomainBtn" class="btn btn-primary" data-i18n="btnAdd">Ajouter</button>
          </div>
          
          <div class="personal-domains-list" id="personalDomainsList">
            <p class="no-list" data-i18n="noListPersonal">Aucun domaine personnel configuré</p>
          </div>
        </section>
        
        <section class="section">
          <h2 data-i18n="importExportTitle">Import / Export</h2>
          <p class="section-description" data-i18n="importExportDescription">Exportez votre liste pour la sauvegarder ou l'importer sur un autre navigateur</p>
          
          <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button id="exportPersonalBtn" class="btn btn-secondary">
              <i class="fas fa-download"></i> <span data-i18n="btnExport">Exporter la liste</span>
            </button>
            <button id="importPersonalBtn" class="btn btn-secondary">
              <i class="fas fa-upload"></i> <span data-i18n="btnImport">Importer une liste</span>
            </button>
          </div>
          
          <input type="file" id="importFileInput" accept=".json" style="display: none;">
        </section>
      </div>
      
      <!-- Onglet Paramètres -->
      <div class="tab-content" id="settings">
        <section class="section">
          <h2 data-i18n="generalSettingsTitle">Paramètres généraux</h2>
          
          <div class="setting-item">
            <label class="setting-label">
              <span data-i18n="language">Langue</span>
            </label>
            <select id="languageSelect" class="input-field">
              <option value="auto" data-i18n="languageAuto">Automatique (langue du navigateur)</option>
              <option value="en" data-i18n="languageEn">English</option>
              <option value="fr" data-i18n="languageFr">Français</option>
            </select>
            <p class="setting-description" data-i18n="languageDescription">Choisissez la langue de l'interface</p>
          </div>
          
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" id="enterpriseMode" class="checkbox">
              <span data-i18n="enterpriseMode">Mode entreprise</span>
            </label>
            <p class="setting-description" data-i18n="enterpriseModeDescription">Activez cette option si vous êtes administrateur et souhaitez gérer une liste de domaines pour votre organisation. Cela affichera l'onglet "Source entreprise".</p>
          </div>
          
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" id="checkCN" class="checkbox">
              <span data-i18n="checkCN">Vérifier la correspondance du certificat CN</span>
            </label>
            <p class="setting-description" data-i18n="checkCNDescription">Affiche un avertissement si le CN du certificat ne correspond pas au domaine (Firefox uniquement)</p>
          </div>
          
          <div class="setting-item">
            <label class="setting-label">
              <span data-i18n="cacheDuration">Durée de cache des listes (heures)</span>
            </label>
            <input type="number" id="ttl" min="1" max="168" value="24" class="input-field">
            <p class="setting-description" data-i18n="cacheDurationDescription">Fréquence de mise à jour automatique des listes distantes (par défaut: 24h)</p>
          </div>
        </section>
        
        <section class="section">
          <h2 data-i18n="bannerColorsTitle">Couleurs des bandeaux</h2>
          
          <div class="color-setting">
            <label class="color-label">
              <span data-i18n="colorEnterprise">Liste entreprise</span>
              <input type="color" id="colorEnterprise" value="#2ECC71" class="color-input">
            </label>
          </div>
          
          <div class="color-setting">
            <label class="color-label">
              <span data-i18n="colorCommunity">Liste communautaire</span>
              <input type="color" id="colorCommunity" value="#3498DB" class="color-input">
            </label>
          </div>
          
          <div class="color-setting">
            <label class="color-label">
              <span data-i18n="colorPersonal">Liste personnelle</span>
              <input type="color" id="colorPersonal" value="#9B59B6" class="color-input">
            </label>
          </div>
        </section>
        
        <div class="save-section">
          <button id="saveSettingsBtn" class="btn btn-success">
            <i class="fas fa-save"></i> <span data-i18n="btnSave">Enregistrer les paramètres</span>
          </button>
          <button id="resetSettingsBtn" class="btn btn-secondary">
            <i class="fas fa-undo"></i> <span data-i18n="btnReset">Réinitialiser</span>
          </button>
        </div>
      </div>
      
      <!-- Onglet À propos -->
      <div class="tab-content" id="about">
        <section class="section">
          <h2 data-i18n="aboutTitle">À propos de ShieldSign</h2>
          
          <div class="about-info">
            <p><strong data-i18n="aboutVersion">Version:</strong> 1.0.0</p>
            <p><strong data-i18n="aboutLicense">Licence:</strong> MIT</p>
            <p><strong data-i18n="aboutDescription">Description:</strong> <span data-i18n="aboutDescriptionText">Extension de validation visuelle des pages de connexion sûres via listes blanches de domaines</span></p>
          </div>
          
          <div class="about-links">
            <a href="https://github.com/ZA512/ShieldSign" target="_blank" class="btn btn-link">
              <i class="fab fa-github"></i> <span data-i18n="aboutGithub">Dépôt GitHub</span>
            </a>
            <a href="https://github.com/ZA512/ShieldSign/issues" target="_blank" class="btn btn-link">
              <i class="fas fa-bug"></i> <span data-i18n="aboutBugReport">Signaler un bug</span>
            </a>
            <a href="https://github.com/ZA512/ShieldSign/blob/main/README.md" target="_blank" class="btn btn-link">
              <i class="fas fa-book"></i> <span data-i18n="aboutDocumentation">Documentation</span>
            </a>
          </div>
          
          <div class="about-section">
            <h3 data-i18n="aboutContributors">Contributeurs</h3>
            <p data-i18n="aboutContributorsText">Merci à tous les contributeurs du projet ShieldSign</p>
          </div>
          
          <div class="about-section">
            <h3 data-i18n="aboutPrivacy">Confidentialité</h3>
            <p data-i18n="aboutPrivacyText">ShieldSign ne collecte aucune donnée utilisateur. Toutes les vérifications sont effectuées localement dans votre navigateur.</p>
          </div>
        </section>
      </div>
    </main>
    
    <div id="toast" class="toast"></div>
  </div>
  
  <script src="options.js"></script>
</body>
</html>
