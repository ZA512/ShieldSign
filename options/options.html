<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paramètres - ShieldSign</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <img src="../icons/icon512ssf.png" alt="ShieldSign" class="header-logo">
        <h1>ShieldSign - Paramètres</h1>
      </div>
    </header>
    
    <nav class="tabs">
      <button class="tab-btn active" data-tab="community">Sources communautaires</button>
      <button class="tab-btn" data-tab="enterprise" id="enterpriseTab" style="display: none;">Source entreprise</button>
      <button class="tab-btn" data-tab="personal">Sources personnelles</button>
      <button class="tab-btn" data-tab="settings">Paramètres</button>
      <button class="tab-btn" data-tab="about">À propos</button>
    </nav>
    
    <main>
      <!-- Onglet Sources communautaires -->
      <div class="tab-content active" id="community">
        <section class="section">
          <h2>Liste officielle ShieldSign</h2>
          <p class="section-description">Liste officielle maintenue par l'équipe ShieldSign, incluant les services web et cloud les plus populaires. Activée par défaut.</p>
          
          <div class="official-list-container">
            <div class="list-item" id="officialListItem">
              <div class="list-info">
                <div class="list-name">ShieldSign Official List</div>
                <div class="list-url">Liste officielle (65+ domaines validés)</div>
              </div>
              <div style="display: flex; gap: 8px;">
                <button class="toggle-btn enabled" id="officialListToggle" title="Désactiver">
                  <i class="fas fa-check-circle"></i>
                </button>
                <button class="btn-icon" id="reinstallOfficialBtn" title="Réinstaller la liste officielle">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <section class="section">
          <h2>Listes communautaires additionnelles</h2>
          <p class="section-description">Ajoutez d'autres listes publiques maintenues par la communauté (optionnel)</p>
          
          <div class="input-group">
            <input type="url" id="communityUrl" placeholder="https://exemple.com/liste-communautaire.json" class="input-field">
            <button id="addCommunityBtn" class="btn btn-primary">Ajouter</button>
          </div>
          
          <div class="community-lists" id="communityLists">
            <p class="no-list">Aucune liste additionnelle configurée</p>
          </div>
        </section>
      </div>
      
      <!-- Onglet Source entreprise -->
      <div class="tab-content" id="enterprise">
        <section class="section">
          <div class="info-box">
            <h3>ℹ️ À propos de la source entreprise</h3>
            <p>Cette fonctionnalité est destinée aux <strong>administrateurs d'entreprise</strong> qui souhaitent déployer une liste de domaines validés pour leurs collaborateurs.</p>
            <p><strong>Format des domaines :</strong> Utilisez le format complet incluant le sous-domaine et le domaine principal (ce qui se trouve entre <code>https://</code> et le premier <code>/</code>).</p>
            <p><strong>Exemples :</strong></p>
            <ul>
              <li>✅ <code>login.monentreprise.com</code></li>
              <li>✅ <code>sso.monentreprise.fr</code></li>
              <li>✅ <code>auth.intranet.monentreprise.net</code></li>
              <li>❌ <code>https://login.monentreprise.com/auth</code> (ne pas inclure https:// ni le chemin)</li>
            </ul>
            <p class="warning">⚠️ <strong>Sécurité :</strong> Hébergez votre liste sur un serveur interne ou privé, <strong>pas sur une URL publique</strong>.</p>
          </div>
        </section>
        
        <section class="section">
          <h2>Liste entreprise</h2>
          <p class="section-description">Une seule liste entreprise peut être configurée (priorité maximale sur toutes les autres sources)</p>
          
          <div class="input-group">
            <input type="url" id="enterpriseUrl" placeholder="https://intranet.monentreprise.com/shieldsign-list.json" class="input-field">
            <button id="addEnterpriseBtn" class="btn btn-primary">Ajouter</button>
          </div>
          
          <div class="enterprise-list" id="enterpriseList">
            <p class="no-list">Aucune liste entreprise configurée</p>
          </div>
        </section>
      </div>
      
      <!-- Onglet Sources personnelles -->
      <div class="tab-content" id="personal">
        <section class="section">
          <h2>Gestion des domaines personnels</h2>
          <p class="section-description">Ajoutez vos propres domaines de confiance (priorité supérieure aux listes communautaires)</p>
          
          <div class="input-group">
            <input type="text" id="personalDomain" placeholder="login.exemple.com" class="input-field">
            <button id="addPersonalDomainBtn" class="btn btn-primary">Ajouter</button>
          </div>
          
          <div class="personal-domains-list" id="personalDomainsList">
            <p class="no-list">Aucun domaine personnel configuré</p>
          </div>
        </section>
        
        <section class="section">
          <h2>Import / Export</h2>
          <p class="section-description">Exportez votre liste pour la sauvegarder ou l'importer sur un autre navigateur</p>
          
          <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button id="exportPersonalBtn" class="btn btn-secondary">
              <i class="fas fa-download"></i> Exporter la liste
            </button>
            <button id="importPersonalBtn" class="btn btn-secondary">
              <i class="fas fa-upload"></i> Importer une liste
            </button>
          </div>
          
          <input type="file" id="importFileInput" accept=".json" style="display: none;">
        </section>
      </div>
      
      <!-- Onglet Paramètres -->
      <div class="tab-content" id="settings">
        <section class="section">
          <h2>Paramètres généraux</h2>
          
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" id="enterpriseMode" class="checkbox">
              <span>Mode entreprise</span>
            </label>
            <p class="setting-description">Activez cette option si vous êtes administrateur et souhaitez gérer une liste de domaines pour votre organisation. Cela affichera l'onglet "Source entreprise".</p>
          </div>
          
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" id="checkCN" class="checkbox">
              <span>Vérifier la correspondance du certificat CN</span>
            </label>
            <p class="setting-description">Affiche un avertissement si le CN du certificat ne correspond pas au domaine (Firefox uniquement)</p>
          </div>
          
          <div class="setting-item">
            <label class="setting-label">
              <span>Durée de cache des listes (heures)</span>
            </label>
            <input type="number" id="ttl" min="1" max="168" value="24" class="input-field">
            <p class="setting-description">Fréquence de mise à jour automatique des listes distantes (par défaut: 24h)</p>
          </div>
        </section>
        
        <section class="section">
          <h2>Couleurs des bandeaux</h2>
          
          <div class="color-setting">
            <label class="color-label">
              <span>Liste entreprise</span>
              <input type="color" id="colorEnterprise" value="#2ECC71" class="color-input">
            </label>
          </div>
          
          <div class="color-setting">
            <label class="color-label">
              <span>Liste communautaire</span>
              <input type="color" id="colorCommunity" value="#3498DB" class="color-input">
            </label>
          </div>
          
          <div class="color-setting">
            <label class="color-label">
              <span>Liste personnelle</span>
              <input type="color" id="colorPersonal" value="#9B59B6" class="color-input">
            </label>
          </div>
        </section>
        
        <div class="save-section">
          <button id="saveSettingsBtn" class="btn btn-success">
            <i class="fas fa-save"></i> Enregistrer les paramètres
          </button>
          <button id="resetSettingsBtn" class="btn btn-secondary">
            <i class="fas fa-undo"></i> Réinitialiser
          </button>
        </div>
      </div>
      
      <!-- Onglet À propos -->
      <div class="tab-content" id="about">
        <section class="section">
          <h2>À propos de ShieldSign</h2>
          
          <div class="about-info">
            <p><strong>Version:</strong> 1.0.0</p>
            <p><strong>Licence:</strong> MIT</p>
            <p><strong>Description:</strong> Extension de validation visuelle des pages de connexion sûres via listes blanches de domaines</p>
          </div>
          
          <div class="about-links">
            <a href="https://github.com/ZA512/ShieldSign" target="_blank" class="btn btn-link">
              <i class="fab fa-github"></i> Dépôt GitHub
            </a>
            <a href="https://github.com/ZA512/ShieldSign/issues" target="_blank" class="btn btn-link">
              <i class="fas fa-bug"></i> Signaler un bug
            </a>
            <a href="https://github.com/ZA512/ShieldSign/blob/main/README.md" target="_blank" class="btn btn-link">
              <i class="fas fa-book"></i> Documentation
            </a>
          </div>
          
          <div class="about-section">
            <h3>Contributeurs</h3>
            <p>Merci à tous les contributeurs du projet ShieldSign</p>
          </div>
          
          <div class="about-section">
            <h3>Confidentialité</h3>
            <p>ShieldSign ne collecte aucune donnée utilisateur. Toutes les vérifications sont effectuées localement dans votre navigateur.</p>
          </div>
        </section>
      </div>
    </main>
    
    <div id="toast" class="toast"></div>
  </div>
  
  <script src="options.js"></script>
</body>
</html>
